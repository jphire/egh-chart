"use strict";var greenhouseApp=angular.module("greenhouseApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","firebase"]).config(["$routeProvider",function(a){a.when("/channels",{templateUrl:"views/channels.html",controller:"ChannelsCtrl"}).when("/channels/:id",{templateUrl:"views/channel.html",controller:"ChannelCtrl"}).otherwise({redirectTo:"/channels"})}]);angular.module("greenhouseApp").controller("ChartCtrl",["$scope","$routeParams","$http",function(){var a=new Firebase("https://greenhouse.firebaseio.com/channels/");console.log(a),$("#chart1").highcharts("StockChart",{series:[]})}]),angular.module("greenhouseApp").controller("ChannelsCtrl",["$scope","$routeParams","$http","$location","$firebase",function(a,b,c,d,e){var f=new Firebase("https://greenhouse.firebaseio.com/channels");a.channels=e(f),a.appUrl=d.$$host+":"+d.$$port,a.addChannel=function(){var b=a.fields,c=f.push(b),d=c.path.n[1],e=[{id:d,data:[]}],g=c.child("data");g.set(e)}}]),angular.module("greenhouseApp").controller("ChannelCtrl",["$scope","$routeParams","$http","$firebase",function(a,b,c,d){a.id=b.id;var e=new Firebase("https://greenhouse.firebaseio.com/channels/"+a.id+"/data/0/data");a.data=d(e),$("#chart1").highcharts("StockChart",{series:[{id:a.id,data:[]}]}),e.on("child_added",function(b){var c=b.val()[0],d=parseFloat(b.val()[1]);$("#chart1").highcharts().get(a.id).addPoint([c,d])}),a.parseDate=function(a){var b=new Date(a);return b.getDate()+"."+(b.getMonth()+1)+"."+b.getFullYear()+" "+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()},a.addData=function(){a.fields&&a.fields.value&&e.push([Date.parse(new Date),parseFloat(a.fields.value)],function(a){console.log("done",a),$("#data-value")[0].value=""})},a.removeData=function(){$("#chart1").highcharts().get(a.id).setData([]),e.remove(function(){console.log("done")})}}]);